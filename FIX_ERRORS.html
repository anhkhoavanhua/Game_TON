<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Fix All Errors - Neon Brick Breaker</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0e14 0%, #1a2130 100%);
            color: #00ffc4;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
            line-height: 1.6;
        }
        h1 {
            color: #ff00e6;
            text-shadow: 0 0 20px #ff00e6;
            border-bottom: 2px solid #ff00e6;
            padding-bottom: 10px;
        }
        h2 {
            color: #00d4ff;
            margin-top: 30px;
        }
        .step {
            background: #141922;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 4px solid #00ffc4;
        }
        .step-number {
            background: linear-gradient(135deg, #00ffc4, #00d4ff);
            color: #0a0e14;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
        .code-block {
            background: #0a0e14;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            border: 1px solid #00ffc4;
            margin: 10px 0;
        }
        .warning {
            background: rgba(255, 71, 87, 0.1);
            border-left-color: #ff4757;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #ff4757;
        }
        .success {
            background: rgba(46, 213, 115, 0.1);
            border-left-color: #2ed573;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #2ed573;
        }
        .button {
            background: linear-gradient(135deg, #00ffc4, #00d4ff);
            color: #0a0e14;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
        }
        .button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0, 255, 196, 0.4);
        }
        ul {
            margin-left: 20px;
        }
        li {
            margin: 8px 0;
        }
        a {
            color: #00d4ff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>üîß H∆Ø·ªöNG D·∫™N FIX T·∫§T C·∫¢ L·ªñI</h1>

    <div class="success">
        <strong>‚úÖ T√ìM T·∫ÆT:</strong><br>
        - SQL Script ƒë√£ ƒë∆∞·ª£c t·∫°o: <code>supabase_setup.sql</code><br>
        - Server ƒëang ch·∫°y t·∫°i: <code>http://localhost:8000</code><br>
        - Ch·ªâ c·∫ßn l√†m theo 3 b∆∞·ªõc d∆∞·ªõi ƒë√¢y l√† xong!
    </div>

    <h2>üìã L·ªñI PH·ªî BI·∫æN & C√ÅCH FIX</h2>

    <!-- ERROR 1 -->
    <div class="step">
        <h3><span class="step-number">1</span> L·ªói: "relation public.users does not exist"</h3>

        <p><strong>Nguy√™n nh√¢n:</strong> Database ch∆∞a c√≥ tables</p>

        <p><strong>Gi·∫£i ph√°p:</strong></p>
        <ol>
            <li>M·ªü Supabase Dashboard:
                <a href="https://supabase.com/dashboard" target="_blank">
                    https://supabase.com/dashboard
                </a>
            </li>
            <li>Ch·ªçn project: <code>darzwbsnqyxmkkpqffqg</code></li>
            <li>Click <strong>SQL Editor</strong> (menu b√™n tr√°i)</li>
            <li>Click <strong>New Query</strong></li>
            <li>M·ªü file <code>supabase_setup.sql</code> v√† copy to√†n b·ªô n·ªôi dung</li>
            <li>Paste v√†o SQL Editor</li>
            <li>Click <strong>Run</strong> (ho·∫∑c Ctrl+Enter)</li>
        </ol>

        <div class="success">
            ‚úÖ K·∫øt qu·∫£: S·∫Ω th·∫•y "Success. No rows returned" - ƒë√¢y l√† OK!
        </div>
    </div>

    <!-- ERROR 2 -->
    <div class="step">
        <h3><span class="step-number">2</span> L·ªói: "new row violates row-level security policy"</h3>

        <p><strong>Nguy√™n nh√¢n:</strong> RLS (Row Level Security) qu√° strict</p>

        <p><strong>Gi·∫£i ph√°p:</strong> ƒê√£ fix trong SQL script ·ªü b∆∞·ªõc 1</p>

        <div class="code-block">
-- RLS policies ƒë√£ ƒë∆∞·ª£c config trong script:
CREATE POLICY "Users can insert their own data"
    ON users FOR INSERT
    WITH CHECK (true);
        </div>

        <p>N·∫øu v·∫´n l·ªói, t·∫Øt RLS t·∫°m th·ªùi (ch·ªâ ƒë·ªÉ test):</p>
        <div class="code-block">
ALTER TABLE users DISABLE ROW LEVEL SECURITY;
ALTER TABLE scores DISABLE ROW LEVEL SECURITY;
ALTER TABLE referrals DISABLE ROW LEVEL SECURITY;
        </div>
    </div>

    <!-- ERROR 3 -->
    <div class="step">
        <h3><span class="step-number">3</span> L·ªói: "CORS policy blocked"</h3>

        <p><strong>Nguy√™n nh√¢n:</strong> Browser block request t·ªõi Supabase</p>

        <p><strong>Gi·∫£i ph√°p:</strong></p>
        <ol>
            <li>Trong Supabase Dashboard ‚Üí <strong>Settings</strong> ‚Üí <strong>API</strong></li>
            <li>Scroll xu·ªëng <strong>CORS Configuration</strong></li>
            <li>Th√™m origin: <code>http://localhost:8000</code></li>
            <li>Th√™m origin: <code>https://anhkhoavanhua.github.io</code></li>
            <li>Click <strong>Save</strong></li>
        </ol>

        <div class="warning">
            ‚ö†Ô∏è L∆∞u √Ω: Supabase th∆∞·ªùng cho ph√©p t·∫•t c·∫£ origins m·∫∑c ƒë·ªãnh, n√™n l·ªói n√†y √≠t g·∫∑p
        </div>
    </div>

    <!-- ERROR 4 -->
    <div class="step">
        <h3><span class="step-number">4</span> L·ªói: "Invalid API key"</h3>

        <p><strong>Nguy√™n nh√¢n:</strong> API key sai ho·∫∑c ƒë√£ expire</p>

        <p><strong>Gi·∫£i ph√°p:</strong></p>
        <ol>
            <li>V√†o Supabase Dashboard ‚Üí <strong>Settings</strong> ‚Üí <strong>API</strong></li>
            <li>Copy <strong>Project URL</strong> v√† <strong>anon public key</strong></li>
            <li>M·ªü file <code>NeonBrick.html</code></li>
            <li>T√¨m d√≤ng:</li>
        </ol>

        <div class="code-block">
const SUPABASE_URL = 'https://darzwbsnqyxmkkpqffqg.supabase.co';
const SUPABASE_KEY = 'eyJhbGci...';
        </div>

        <p>Thay th·∫ø b·∫±ng URL v√† key m·ªõi</p>
    </div>

    <!-- ERROR 5 -->
    <div class="step">
        <h3><span class="step-number">5</span> L·ªói: "Failed to fetch" / Network error</h3>

        <p><strong>Nguy√™n nh√¢n:</strong> Kh√¥ng c√≥ internet ho·∫∑c Supabase server down</p>

        <p><strong>Gi·∫£i ph√°p:</strong></p>
        <ol>
            <li>Ki·ªÉm tra internet: <code>ping 8.8.8.8</code></li>
            <li>Ki·ªÉm tra Supabase status:
                <a href="https://status.supabase.com" target="_blank">
                    https://status.supabase.com
                </a>
            </li>
            <li>Th·ª≠ ping Supabase project:
                <div class="code-block">curl https://darzwbsnqyxmkkpqffqg.supabase.co</div>
            </li>
        </ol>
    </div>

    <h2>üéØ SAU KHI FIX XONG</h2>

    <div class="step">
        <h3>Test l·∫°i ƒë·ªÉ verify:</h3>
        <ol>
            <li>M·ªü: <a href="http://localhost:8000/test_supabase.html" target="_blank">Test Supabase</a></li>
            <li>Ki·ªÉm tra t·∫•t c·∫£ ƒë·ªÅu ‚úÖ m√†u xanh</li>
            <li>Click <strong>Run All Tests</strong></li>
            <li>N·∫øu OK ‚Üí M·ªü game: <a href="http://localhost:8000/NeonBrick.html" target="_blank">Play Game</a></li>
        </ol>

        <a href="http://localhost:8000/test_supabase.html" class="button">üß™ Test Supabase</a>
        <a href="http://localhost:8000/NeonBrick.html" class="button">üéÆ Play Game</a>
    </div>

    <h2>üìö RESOURCES</h2>

    <div class="step">
        <ul>
            <li><strong>Supabase Dashboard:</strong> <a href="https://supabase.com/dashboard" target="_blank">supabase.com/dashboard</a></li>
            <li><strong>SQL Editor:</strong> Dashboard ‚Üí SQL Editor</li>
            <li><strong>API Settings:</strong> Dashboard ‚Üí Settings ‚Üí API</li>
            <li><strong>Database Tables:</strong> Dashboard ‚Üí Table Editor</li>
            <li><strong>Supabase Docs:</strong> <a href="https://supabase.com/docs" target="_blank">supabase.com/docs</a></li>
        </ul>
    </div>

    <h2>üÜò V·∫™N G·∫∂P L·ªñI?</h2>

    <div class="warning">
        <strong>G·ª≠i cho t√¥i:</strong><br>
        1. Screenshot c·ªßa error trong Console (F12 ‚Üí Console)<br>
        2. K·∫øt qu·∫£ t·ª´ trang test_supabase.html<br>
        3. Output c·ªßa SQL script khi ch·∫°y<br>
        <br>
        T√¥i s·∫Ω debug c·ª• th·ªÉ!
    </div>

    <div class="success" style="margin-top: 30px; text-align: center;">
        <h3>üéä Good Luck!</h3>
        <p>Sau khi fix xong, game s·∫Ω ho·∫°t ƒë·ªông 100% v·ªõi backend!</p>
    </div>

    <script>
        // Auto-refresh test results every 5s if on test page
        if (window.location.hash === '#auto-test') {
            console.log('Auto-test mode enabled');
            setTimeout(() => {
                window.location.href = 'test_supabase.html';
            }, 2000);
        }
    </script>
</body>
</html>
